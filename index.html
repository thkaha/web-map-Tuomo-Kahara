<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<link rel="stylesheet" href="css/leaflet.css">
<link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
<link rel="stylesheet" href="css/qgis2web.css">
<link rel="stylesheet" href="css/fontawesome-all.min.css">
<link rel="stylesheet" href="css/leaflet.photon.css">
<link rel="stylesheet" href="css/L.Control.MousePosition.css">

<style>
html, body, #map {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}
img {
    max-width: 100%;
    max-height: 100%;
}
</style>

<title>Forest Reserves and National Parks in Tanzania</title>
</head>

<body>
<div id="map"></div>

<script src="js/qgis2web_expressions.js"></script>
<script src="js/leaflet.js"></script>
<script src="js/L.Control.Layers.Tree.min.js"></script>
<script src="js/leaflet.rotatedMarker.js"></script>
<script src="js/leaflet.hcl.js"></script>
<script src="js/leaflet-hash.js"></script>
<script src="js/Autolinker.min.js"></script>
<script src="js/rbush.min.js"></script>
<script src="js/labelgun.min.js"></script>
<script src="js/labels.js"></script>
<script src="js/leaflet.photon.js"></script>
<script src="js/L.Control.MousePosition.js"></script>

<!-- DATA -->
<script src="data/TanzaniaNationalParks2016_1.js"></script>
<script src="data/TanzaniaForestReserves2020_2.js"></script>

<script>

// --- highlight function ---
var highlightLayer;
function highlightFeature(e) {
    highlightLayer = e.target;
    highlightLayer.setStyle({
        color: '#cb6649',
        weight: 4
    });
}

// --- map ---
var map = L.map('map', {
    zoomControl: false,
    maxZoom: 28,
    minZoom: 5
});
var hash = new L.Hash(map);

// --- panels ---
map.attributionControl.setPrefix(
    '<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> · ' +
    '<a href="https://leafletjs.com">Leaflet</a> · ' +
    '<a href="https://qgis.org">QGIS</a>'
);

// --- basemap ---
map.createPane('pane_OpenStreetMap_0');
map.getPane('pane_OpenStreetMap_0').style.zIndex = 400;

var layer_OpenStreetMap_0 = L.tileLayer(
    'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
    {
        pane: 'pane_OpenStreetMap_0',
        opacity: 1,
        attribution: '© OpenStreetMap contributors',
        minZoom: 5,
        maxZoom: 28,
        maxNativeZoom: 19
    }
).addTo(map);

// --- GOOGLE SATELLITE (optional) ---
var layer_Google_sat = L.tileLayer(
    'https://www.google.cn/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}',
    {
        minZoom: 5,
        maxZoom: 28,
        attribution: '© Google'
    }
);

// --------------------------
// NATIONAL PARKS (cleaned)
// --------------------------
function style_TanzaniaNationalParks2016_1_0(feature) {
    switch(String(feature.properties['q2wHide_desig_eng']).trim()) {
        case 'Conservation Area':
            return {color:'#232323', weight:1, fillColor:'#005001', fillOpacity:0.8};
        case 'Game Reserve':
            return {color:'#232323', weight:1, fillColor:'#b1ec1d', fillOpacity:0.8};
        case 'National Park':
            return {color:'#232323', weight:1, fillColor:'#0e8e05', fillOpacity:0.8};
        case 'Open area':
            return {color:'#232323', weight:1, fillColor:'#8c4e52', fillOpacity:0.8};
        case 'Wildlife Management Area':
            return {color:'#232323', weight:1, fillColor:'#adff82', fillOpacity:0.8};
        default:
            return {color:'#555', weight:1, fillColor:'#999', fillOpacity:0.4};
    }
}

map.createPane('pane_TanzaniaNationalParks2016_1');
map.getPane('pane_TanzaniaNationalParks2016_1').style.zIndex = 401;

var layer_TanzaniaNationalParks2016_1 = new L.geoJson(
    json_TanzaniaNationalParks2016_1,
    {
        pane: 'pane_TanzaniaNationalParks2016_1',
        style: style_TanzaniaNationalParks2016_1_0,
        onEachFeature: function (feature, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: function(e){ layer.setStyle(style_TanzaniaNationalParks2016_1_0(feature)); }
            });
        }
    }
).addTo(map);

// --------------------------
// FOREST RESERVES (cleaned)
// --------------------------
function style_TanzaniaForestReserves2020_2_0(feature) {
    switch(String(feature.properties['q2wHide_desig_eng']).trim()) {
        case 'Forest Plantation':
            return {color:'#bee055', weight:2, fillColor:'#bee055', fillOpacity:0.8};
        case 'Forest Reserve':
            return {color:'#047e00', weight:2, fillColor:'#047e00', fillOpacity:0.8};
        case 'Nature Forest Reserve':
            return {color:'#7fe17c', weight:2, fillColor:'#7fe17c', fillOpacity:0.8};
        default:
            return {color:'#555', weight:2, fillColor:'#aaa', fillOpacity:0.4};
    }
}

map.createPane('pane_TanzaniaForestReserves2020_2');
map.getPane('pane_TanzaniaForestReserves2020_2').style.zIndex = 402;

var layer_TanzaniaForestReserves2020_2 = new L.geoJson(
    json_TanzaniaForestReserves2020_2,
    {
        pane: 'pane_TanzaniaForestReserves2020_2',
        style: style_TanzaniaForestReserves2020_2_0,
        onEachFeature: function (feature, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: function(e){ layer.setStyle(style_TanzaniaForestReserves2020_2_0(feature)); }
            });
        }
    }
).addTo(map);

// --- layer tree ---
var overlaysTree = [
    {label:"<b>Tanzania Forest Reserves 2020</b>", layer:layer_TanzaniaForestReserves2020_2},
    {label:"<b>Tanzania National Parks 2016</b>", layer:layer_TanzaniaNationalParks2016_1},
    {label:"<b>OpenStreetMap</b>", layer:layer_OpenStreetMap_0}
];

L.control.layers.tree(null, overlaysTree, {collapsed:true}).addTo(map);

// --- zoom control ---
L.control.zoom({position:'topleft'}).addTo(map);

// --- fit bounds ---
map.fitBounds(layer_TanzaniaForestReserves2020_2.getBounds());

</script>
</body>
</html>
